<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <canvas width="200" height="200"></canvas>
    <script>
        let c = document.querySelector("canvas");
        let ctx = c.getContext("2d");
        main();

        function main() {
            const buffer = makeImageBuffer();
            const scene = makeScene();
            renderScene(scene, buffer);
            showImage(buffer);
        }

        function showImage(imageData) {
            ctx.putImageData(imageData, 0, 0);
        }

        function makeImageBuffer() {
            return ctx.createImageData(c.width, c.height);
        }

        /** @typedef {{x: number, y: number, z: number}} vec */
        /** @typedef {{c: vec, r: number}} sphere */
        /** @typedef {{u: vec}} plane */
        /** @typedef {(sphere | plane)[]} scene */

        /** @returns {scene} */
        function makeScene() {
            return []
       }

        function renderScene(scene, buffer) {
            
            // create scene with Cornell box
            // camera trace rays equal distance and direction from sensor pos, size, fov (get each pixel initial ray vector)
            // trace scene until collision with sphere or plane
            // calculate reflection angle
            // material can set ratio reflectivity: absorption:,  

            for (let i = 0; i < buffer.data.length; i += 4) {
                buffer.data[i] = 255
                buffer.data[i + 1] = 0
                buffer.data[i + 2] = 0
                buffer.data[i + 3] = 255
            }
        }
    </script>
</body>

</html>